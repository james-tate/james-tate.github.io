{"implements":[],"javadoc":"<code>VersionFile<\/code> records buffer changes and parameters necessary to reconstruct an\n older version of a LocalBufferFile.","static":false,"extends":"java.lang.Object","methods":[{"javadoc":"Construct a new recovery file for update\/output.\n@param srcBf the original source buffer file to which this file applies.\n@param rfile version buffer file to be updated\/created\n@throws IOException if vfile already exists or an IO error occurs","static":false,"name":"<init>","comment":"Construct a new recovery file for update\/output.","params":[{"type_long":"db.buffers.LocalBufferFile","name":"srcBf","comment":"the original source buffer file to which this file applies.","type_short":"LocalBufferFile"},{"type_long":"java.io.File","name":"rfile","comment":"version buffer file to be updated\/created","type_short":"File"},{"type_long":"boolean","name":"create","comment":"","type_short":"boolean"}],"throws":[{"type_long":"java.io.IOException","comment":"if vfile already exists or an IO error occurs","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Construct a read-only recovery file\n@param srcBf the original source buffer file to which this file applies.\n@param rfile version buffer file to be updated\/created\n@throws IOException\n@throws IOException if vfile already exists or an IO error occurs","static":false,"name":"<init>","comment":"Construct a read-only recovery file","params":[{"type_long":"db.buffers.LocalBufferFile","name":"srcBf","comment":"the original source buffer file to which this file applies.","type_short":"LocalBufferFile"},{"type_long":"java.io.File","name":"rfile","comment":"version buffer file to be updated\/created","type_short":"File"}],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"setModified","comment":"","params":[],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"getFile","comment":"","params":[],"throws":[],"return":{"type_long":"java.io.File","comment":"","type_short":"File"}},{"javadoc":"","static":false,"name":"isValid","comment":"","params":[],"throws":[],"return":{"type_long":"boolean","comment":"","type_short":"boolean"}},{"javadoc":"","static":false,"name":"getTimestamp","comment":"","params":[],"throws":[],"return":{"type_long":"long","comment":"","type_short":"long"}},{"javadoc":"Close the version file.","static":false,"name":"close","comment":"Close the version file.","params":[],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"parseFile","comment":"","params":[],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"saveBufferMap","comment":"","params":[],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"readBufferMap","comment":"","params":[],"throws":[{"type_long":"java.util.NoSuchElementException","comment":"","type_short":"NoSuchElementException"},{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"saveFreeIndexList","comment":"","params":[],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"","static":false,"name":"readFreeIndexList","comment":"","params":[],"throws":[{"type_long":"java.util.NoSuchElementException","comment":"","type_short":"NoSuchElementException"},{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Set the current index count for the file\n@param newIndexCnt","static":false,"name":"setIndexCount","comment":"Set the current index count for the file","params":[{"type_long":"int","name":"newIndexCnt","comment":"","type_short":"int"}],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Returns the index count for the file","static":false,"name":"getIndexCount","comment":"Returns the index count for the file","params":[],"throws":[],"return":{"type_long":"int","comment":"","type_short":"int"}},{"javadoc":"Set the free index list\n@param freeIndexes","static":false,"name":"setFreeIndexList","comment":"Set the free index list","params":[{"type_long":"int[]","name":"freeIndexes","comment":"","type_short":"int[]"}],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Returns the list of free indexes associated with the original\n buffer file.","static":false,"name":"getFreeIndexList","comment":"Returns the list of free indexes associated with the original\n buffer file.","params":[],"throws":[],"return":{"type_long":"int[]","comment":"","type_short":"int[]"}},{"javadoc":"Store buffer which has been modified in the target.\n@param buf modified buffer\n@param id buffer ID\n@throws IOException if an IO error occurs","static":false,"name":"putBuffer","comment":"Store buffer which has been modified in the target.","params":[{"type_long":"db.buffers.DataBuffer","name":"buf","comment":"modified buffer","type_short":"DataBuffer"}],"throws":[{"type_long":"java.io.IOException","comment":"if an IO error occurs","type_short":"IOException"}],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Remove a buffer previously stored to the snapshot\n by removing it from the map.  It is OK to invoke \n this method for an index whoose buffer was never\n put into this file.\n@param id buffer ID","static":false,"name":"removeBuffer","comment":"Remove a buffer previously stored to the snapshot\n by removing it from the map.  It is OK to invoke \n this method for an index whoose buffer was never\n put into this file.","params":[{"type_long":"int","name":"id","comment":"buffer ID","type_short":"int"}],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Get modified buffer associated with the specified storage index in the \n original file.\n@param buf data buffer\n@param id buffer ID\n@return data buffer or null if buffer has not been modified\n@throws IOException if an IO error occurs","static":false,"name":"getBuffer","comment":"Get modified buffer associated with the specified storage index in the \n original file.","params":[{"type_long":"db.buffers.DataBuffer","name":"buf","comment":"data buffer","type_short":"DataBuffer"},{"type_long":"int","name":"id","comment":"buffer ID","type_short":"int"}],"throws":[{"type_long":"java.io.IOException","comment":"if an IO error occurs","type_short":"IOException"}],"return":{"type_long":"db.buffers.DataBuffer","comment":"data buffer or null if buffer has not been modified","type_short":"DataBuffer"}},{"javadoc":"Returns list of buffer indexes stored within this file.\n These indexes reflect those buffers which have been modified and stored.","static":false,"name":"getBufferIndexes","comment":"Returns list of buffer indexes stored within this file.\n These indexes reflect those buffers which have been modified and stored.","params":[],"throws":[],"return":{"type_long":"int[]","comment":"","type_short":"int[]"}},{"javadoc":"Returns file ID for original source buffer file which may be produced with this version file.","static":false,"name":"getSourceFileID","comment":"Returns file ID for original source buffer file which may be produced with this version file.","params":[],"throws":[],"return":{"type_long":"long","comment":"","type_short":"long"}},{"javadoc":"Returns a list of parameters defined within the original beffer file.\n@throws IOException","static":false,"name":"getUserParameterNames","comment":"Returns a list of parameters defined within the original beffer file.","params":[],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"java.lang.String[]","comment":"","type_short":"java.lang.String[]"}},{"javadoc":"Get a parameter value associated with the original buffer file.\n@param name parameter name\n@return parameter value\n@throws IOException","static":false,"name":"getParameter","comment":"Get a parameter value associated with the original buffer file.","params":[{"type_long":"java.lang.String","name":"name","comment":"parameter name","type_short":"String"}],"throws":[{"type_long":"java.io.IOException","comment":"","type_short":"IOException"}],"return":{"type_long":"int","comment":"parameter value","type_short":"int"}},{"javadoc":"Clear all user parameters","static":false,"name":"clearParameters","comment":"Clear all user parameters","params":[],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}},{"javadoc":"Set user parameter\n@param name\n@param value","static":false,"name":"setParameter","comment":"Set user parameter","params":[{"type_long":"java.lang.String","name":"name","comment":"","type_short":"String"},{"type_long":"int","name":"value","comment":"","type_short":"int"}],"throws":[],"return":{"type_long":"void","comment":"","type_short":"void"}}],"name":"RecoveryFile","comment":"VersionFile records buffer changes and parameters necessary to reconstruct an\n older version of a LocalBufferFile.","fields":[{"type_long":"int","javadoc":"","static":true,"name":"MAGIC_NUMBER","comment":"","type_short":"int","constant_value":"954103380"},{"type_long":"int","javadoc":"","static":true,"name":"VALID","comment":"","type_short":"int","constant_value":"1"},{"type_long":"int","javadoc":"","static":true,"name":"INVALID","comment":"","type_short":"int","constant_value":"0"},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"RECOVERY_PARM_PREFIX","comment":"","type_short":"String","constant_value":"\"~RF.\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"MAGIC_NUMBER_PARM","comment":"","type_short":"String","constant_value":"\"~RF.VersionFile\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"SRC_FILE_ID_HI_PARM","comment":"","type_short":"String","constant_value":"\"~RF.SrcIdHi\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"SRC_FILE_ID_LOW_PARM","comment":"","type_short":"String","constant_value":"\"~RF.SrcIdLow\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"IS_VALID_PARM","comment":"","type_short":"String","constant_value":"\"~RF.OrigBufCnt\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"TIMESTAMP_HI_PARM","comment":"","type_short":"String","constant_value":"\"~RF.TimestampHi\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"TIMESTAMP_LOW_PARM","comment":"","type_short":"String","constant_value":"\"~RF.TimestampLow\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"MAP_BUFFER_INDEX_PARM","comment":"","type_short":"String","constant_value":"\"~RF.MapIndex\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"FREE_LIST_BUFFER_INDEX_PARM","comment":"","type_short":"String","constant_value":"\"~RF.FreeListIndex\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"FREE_LIST_SIZE_PARM","comment":"","type_short":"String","constant_value":"\"~RF.FreeListSize\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"INDEX_COUNT_PARM","comment":"","type_short":"String","constant_value":"\"~RF.BufferCount\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"BAD_FREE_LIST","comment":"","type_short":"String","constant_value":"\"Recovery file is corrupt - bad free list\""},{"type_long":"java.lang.String","javadoc":"","static":true,"name":"BAD_BUFFER_MAP","comment":"","type_short":"String","constant_value":"\"Recovery file is corrupt - bad buffer map\""},{"type_long":"int","javadoc":"","static":true,"name":"NEXT_BUFFER_INDEX_OFFSET","comment":"","type_short":"int","constant_value":"0"},{"type_long":"int","javadoc":"","static":true,"name":"FIRST_ENTRY_OFFSET","comment":"","type_short":"int","constant_value":"4"},{"type_long":"boolean","javadoc":"","static":false,"name":"readOnly","comment":"","type_short":"boolean","constant_value":null},{"type_long":"boolean","javadoc":"","static":false,"name":"valid","comment":"","type_short":"boolean","constant_value":null},{"type_long":"long","javadoc":"","static":false,"name":"timestamp","comment":"","type_short":"long","constant_value":null},{"type_long":"boolean","javadoc":"","static":false,"name":"modified","comment":"","type_short":"boolean","constant_value":null},{"type_long":"db.buffers.LocalBufferFile","javadoc":"","static":false,"name":"recoveryFile","comment":"","type_short":"LocalBufferFile","constant_value":null},{"type_long":"long","javadoc":"","static":false,"name":"srcFileId","comment":"","type_short":"long","constant_value":null},{"type_long":"int","javadoc":"","static":false,"name":"indexCnt","comment":"","type_short":"int","constant_value":null},{"type_long":"db.buffers.IndexProvider","javadoc":"","static":false,"name":"vfIndexProvider","comment":"","type_short":"IndexProvider","constant_value":null},{"type_long":"int","javadoc":"","static":false,"name":"freeListIndex","comment":"","type_short":"int","constant_value":null},{"type_long":"int","javadoc":"","static":false,"name":"mapIndex","comment":"","type_short":"int","constant_value":null},{"type_long":"int[]","javadoc":"","static":false,"name":"freeIndexes","comment":"","type_short":"int[]","constant_value":null},{"type_long":"ghidra.util.datastruct.IntIntHashtable","javadoc":"","static":false,"name":"bufferIndexMap","comment":"","type_short":"IntIntHashtable","constant_value":null}]}
